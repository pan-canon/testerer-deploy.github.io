<!--
	https://the-zilant.github.io/testerer-deploy.github.io/testerer_siter/index.html
	https://www.goat1000.com/tagcanvas.php#links
	https://www.goat1000.com/tagcanvas-centre.php#example
	https://www.goat1000.com/tagcanvas-shapes.php
	https://www.ascii-art-generator.org/
	https://ascii-generator.site/
-->
<!doctype html>
<html>
<head>
	<title>Associative Connection</title>
	<link type="text/css" href="style.css" rel="stylesheet" />
	<!--[if lte IE 8]>
		<script type="text/javascript" src="./js/support/excanvas.js"></script>
	<![endif]-->
	<script type="text/javascript" src="./js/core/tagcanvas.min.js"></script>
	<script type="text/javascript">
		window.onload = function() {
			try {
				TagCanvas.Start('root', 'memory_root', {
					activeAudio: true, 
					//audioIcon: false, 
					audioVolume: '2.0', 
					//bgRadius: '50%', 
					//centreImage: './img/biohazard.png', 
					//decel: '0.60', 
					//dragControl: true, 
					//clickToFront: '.6', 
					//frontSelect: true, 
					//imageRadius: '50%', 
					initial: [0.030, -0.070], 
					lock: 'xy', 
					maxSpeed: '0.05', 
					//noMouse: true, 
					outlineMethod: "colour", 
					outlineColour: '#b22222', 
					padding: '20', 
					pinchZoom: true, 
					//reverse: 1, 
					//shadow: '#000000', 
					//shape: "vcylinder", 
					//shuffleTags: true, 
					textFont: 'Impact, "Arial Black", sans-serif', 
					textColour: "#eee", 
					//tooltip: "native", 
					//weight: true, 
				});
			} catch(e) {
				// something went wrong, hide the canvas container
				document.getElementById('b_memory_section').style.display = 'none';
			}
		};

		function selectBiopunk(e) {
			e.preventDefault();
			TagCanvas.Start('root', 'associative_biopunk', {
				centreImage: './img/biohazard.png', 
				initial: [0.200, 0.000], 
				padding: '20', 
				lock: 'y', 
				shape: 'DblHelix', 
				textColour: null, 
			});
		}

		function selectFolklore(e) {
			e.preventDefault();
			TagCanvas.Start('root', 'associative_folklore', {
				initial: [0.200, 0.000], 
				padding: '20', 
				shape: "vring(0.5)", 
				lock: "x", 
				offsetY: -60, 
			});
		}

		function selectMadness(e) {
			e.preventDefault();
			TagCanvas.Start('root', 'associative_madness', {
				centreImage: './img/arkham.png', 
				initial: [0.200, 0.000], 
				shape: "hcylinder", 
				lock: "x", 
			});
		}

		function DblHelix(n, rx, ry, rz) {
			let a = Math.PI / n, i, j, p = [], z = rz * 2 / n;
			for(i = 0; i < n; ++i) {
				j = a * i;
				if (i % 2)
					j += Math.PI;
				p.push([rx * Math.cos(j), rz - z * i, ry * Math.sin(j)]);
			}
			return p;
		}


var camera, scene, renderer,
    geometry, material, mesh;
 
init();
animate(); 

function init() {
    stats = new Stats();
    stats.setMode(0);
    stats.domElement.style.position = 'absolute';
    stats.domElement.style.left = '0px';
    stats.domElement.style.top = '0px';
    document.body.appendChild(stats.domElement);

    clock = new THREE.Clock();

    renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );

    scene = new THREE.Scene();
 
    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.z = 1000;
    scene.add( camera );
 
    geometry = new THREE.CubeGeometry( 200, 200, 200 );
    material = new THREE.MeshLambertMaterial( { color: 0xaa6666, wireframe: false } );
    mesh = new THREE.Mesh( geometry, material );
    //scene.add( mesh );
    cubeSineDriver = 0;
 
    textGeo = new THREE.PlaneGeometry(300,300);
    THREE.ImageUtils.crossOrigin = ''; //Need this to pull in crossdomain images from AWS
    textTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/quickText.png');
    textMaterial = new THREE.MeshLambertMaterial({color: 0x00ffff, opacity: 1, map: textTexture, transparent: true, blending: THREE.AdditiveBlending})
    text = new THREE.Mesh(textGeo,textMaterial);
    text.position.z = 800;
    scene.add(text);

    light = new THREE.DirectionalLight(0xffffff,0.5);
    light.position.set(-1,0,1);
    scene.add(light);
  
    smokeTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/Smoke-Element.png');
    smokeMaterial = new THREE.MeshLambertMaterial({color: 0x00dddd, map: smokeTexture, transparent: true});
    smokeGeo = new THREE.PlaneGeometry(300,300);
    smokeParticles = [];


    for (p = 0; p < 150; p++) {
        var particle = new THREE.Mesh(smokeGeo,smokeMaterial);
        particle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);
        particle.rotation.z = Math.random() * 360;
        scene.add(particle);
        smokeParticles.push(particle);
    }
 
    document.body.appendChild( renderer.domElement );
 
}
 
function animate() {
 
    // note: three.js includes requestAnimationFrame shim
    stats.begin();
    delta = clock.getDelta();
    requestAnimationFrame( animate );
    evolveSmoke();
    render();
    stats.end();
}
 
function evolveSmoke() {
    var sp = smokeParticles.length;
    while(sp--) {
        smokeParticles[sp].rotation.z += (delta * 0.2);
    }
}

function render() {
 
    mesh.rotation.x += 0.005;
    mesh.rotation.y += 0.01;
    cubeSineDriver += .01;
    mesh.position.z = 100 + (Math.sin(cubeSineDriver) * 500);
    renderer.render( scene, camera );
 
}
	</script>
</head>

<body>

<section class="b_memory">
	<div class="b_memory_section">
		<canvas id="root" width="300" height="300">
			<p>In Internet Explorer versions up to 8, things inside the canvas are inaccessible!</p>
		</canvas>
		<div id="memory_root">
			<ul>
				<li>
					<a onclick="selectBiopunk(event)" href="/">
						#biopunk
						<audio src="./audio/Go_Tell_Aunt_Rhody.ogg"></audio>
					</a>
				</li>
				<li>
					<a onclick="selectFolklore(event)" href="/">
						#folklore
					</a>
				</li>
				<li>
					<a onclick="selectMadness(event)" href="/">
						#madness
					</a>
				</li>
			</ul>
		</div>
		<div id="associative_biopunk" style="display: none;">
			<a href="#" onclick="return false">c</a>
			<a href="#" onclick="return false">n</a>
			<a href="#" onclick="return false">i</a>
			<a href="#" onclick="return false">o</a>
			<a href="#" onclick="return false">t</a>
			<a href="#" onclick="return false">s</a>
			<a href="#" onclick="return false">s</a>
			<a href="#" onclick="return false">i</a>
			<a href="#" onclick="return false">y</a>
			<a href="#" onclick="return false">o</a>
			<a href="#" onclick="return false">#m</a>
			<a href="#" onclick="return false">#p</a>
		</div>
		<div id="associative_folklore" style="display: none;">
			<a href="#" onclick="return false">#mythology</a>
			<a href="#" onclick="return false">#necro fetishism</a>
		</div>
		<div id="associative_madness" style="display: none;">
			<a href="#" onclick="return false">#faith</a>
			<a href="#" onclick="return false">#houses of sorrow</a>
		</div>
	</div>
</section>

	<div class="fog">
		<div></div>
	</div>

</body>
</html>