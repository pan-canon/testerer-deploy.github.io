"use strict";(self.webpackChunktesterer_deploy_github_io=self.webpackChunktesterer_deploy_github_io||[]).push([[659],{61:(t,e,a)=>{a.d(e,{Z:()=>n});var i=a(350),s=a(713);class n extends i.e{constructor(t,e,a,i){super(t),this.app=e,this.languageManager=i,this.key=a.key}async activate(){await this.eventManager.isEventLogged(this.key)?console.log(`Event '${this.key}' is already logged, skipping activation.`):(console.log(`Activating final event: '${this.key}'`),await this.addDiaryEntry(this.key,!0),s.f.set(s.f.KEYS.GAME_FINALIZED,"true"),this.app.visualEffectsManager&&"function"==typeof this.app.visualEffectsManager.triggerGhostAppearanceEffect&&this.app.visualEffectsManager.triggerGhostAppearanceEffect("ghost_fade_out"),await this.app.ghostManager.finishCurrentGhost(),this.app.viewManager&&"function"==typeof this.app.viewManager.setPostButtonEnabled&&this.app.viewManager.setPostButtonEnabled(!1),this.app.questManager&&"function"==typeof this.app.questManager.syncQuestState&&await this.app.questManager.syncQuestState(),s.f.setActiveQuestKey(null),this.app.viewManager&&"function"==typeof this.app.viewManager.showNotification?this.app.viewManager.showNotification("üéâ Congratulations, the scenario is finished!"):console.log("üéâ Congratulations, the scenario is finished!"),document.dispatchEvent(new CustomEvent("gameEventCompleted",{detail:this.key})))}}},350:(t,e,a)=>{a.d(e,{e:()=>n});var i=a(166);class n{constructor(t){this.eventManager=t,this.key=""}async activate(){try{this.eventManager.isEventLogged(this.key)||(console.log(`Activating event: ${this.key}`),await this.eventManager.addDiaryEntry(this.key))}catch(t){i.S.logError(t,"BaseEvent.activate"),i.S.showError("An error occurred during event activation.")}}async addDiaryEntry(t,e=!1){try{await this.eventManager.addMessengerEntry(t,e)}catch(t){i.S.logError(t,"BaseEvent.addDiaryEntry"),i.S.showError("An error occurred while adding a diary entry.")}}}s},911:(t,e,a)=>{a.r(e),a.d(e,{FinalEvent:()=>i.Z,FinalQuest:()=>o});var i=a(61),s=a(350),n=a(713);class o extends s.e{constructor(t,e,a={}){super(t),this.app=e,this.key=a.key||"final_quest",this.finished=!1}async activate(){this.eventManager.isEventLogged(this.key)||(console.log(`[FinalQuest] Activating final quest: ${this.key}`),await this.addDiaryEntry(this.key,!0)),console.log("[FinalQuest] Final quest initiated.")}async checkStatus(){return!0}async finish(){if(this.finished)return;await this.checkStatus()?(this.finished=!0,console.log(`[FinalQuest] Finishing quest: ${this.key}`),await this.addDiaryEntry(`${this.key}_completed`,!0),n.f.set(n.f.KEYS.GAME_FINALIZED,"true"),n.f.setActiveQuestKey(null),this.app.ghostManager&&await this.app.ghostManager.finishCurrentGhost(),this.app.viewManager&&"function"==typeof this.app.viewManager.showNotification?this.app.viewManager.showNotification("üéâ Final quest completed! Scenario ended!",{duration:15e3}):console.log("üéâ Final quest completed! Scenario ended!"),this.app.questManager&&"function"==typeof this.app.questManager.syncQuestState&&await this.app.questManager.syncQuestState(),document.dispatchEvent(new CustomEvent("questCompleted",{detail:this.key}))):this.app.viewManager&&"function"==typeof this.app.viewManager.showNotification&&this.app.viewManager.showNotification("‚ùå Final quest conditions not met!")}}}}]);